

# ğŸŒŸ **COMPLETE CRUD PROJECT**

**Goal:**
Students will build a **complete, clean, professional CRUD Module** using:

âœ” Spring Boot
âœ” Spring Data JPA
âœ” Validation
âœ” Custom Exceptions
âœ” Global Exception Handler
âœ” Logging
âœ” DTO + Entity
âœ” Service Layer
âœ” Repository Layer
âœ” MySQL
âœ” Postman Testing


---

# ğŸŸ¦ **1. Project Name: Student Management Mini Module**

This day students create a FULL working module from scratch.

We will build:

### **Layers:**

```
Controller â†’ Service â†’ Repository â†’ Database
```

### **Features:**

âœ” Create Student
âœ” Get All Students
âœ” Get One Student
âœ” Update Student
âœ” Delete Student
âœ” Validation
âœ” Exception Handling
âœ” Logging (SLF4J)

---

# ğŸŸ© **2. Step 1: Create Student Entity**

### `Student.java`

```java
@Entity
public class Student {

    @Id
    @GeneratedValue(strategy = GenerationType.IDENTITY)
    private Integer id;

    @NotBlank(message = "Name cannot be empty")
    private String name;

    @Email(message = "Invalid email format")
    private String email;

    @Min(value = 18, message = "Age must be 18+")
    private int age;

    // getters and setters
}
```

---

# ğŸŸ§ **3. Step 2: Create Student DTO**

### `StudentDTO.java`

```java
public class StudentDTO {

    private String name;
    private String email;
    private int age;

    // getters and setters
}
```

---

# ğŸŸ¥ **4. Step 3: Create Repository**

```java
public interface StudentRepository extends JpaRepository<Student, Integer> {
}
```

---

# ğŸŸ¦ **5. Step 4: Create Custom Exceptions**

### `StudentNotFoundException.java`

```java
public class StudentNotFoundException extends RuntimeException {
    public StudentNotFoundException(String msg) {
        super(msg);
    }
}
```

---

# ğŸŸª **6. Step 5: Global Exception Handler**

### `GlobalExceptionHandler.java`

```java
@RestControllerAdvice
public class GlobalExceptionHandler {

    @ExceptionHandler(StudentNotFoundException.class)
    public ResponseEntity<String> handleStudentNotFound(StudentNotFoundException ex) {
        return ResponseEntity.status(HttpStatus.NOT_FOUND).body(ex.getMessage());
    }

    @ExceptionHandler(MethodArgumentNotValidException.class)
    public ResponseEntity<Map<String, String>> handleValidation(MethodArgumentNotValidException ex) {
        Map<String, String> errors = new HashMap<>();

        ex.getBindingResult().getFieldErrors().forEach(error ->
                errors.put(error.getField(), error.getDefaultMessage()));

        return ResponseEntity.status(HttpStatus.BAD_REQUEST).body(errors);
    }
}
```

---

# ğŸŸ« **7. Step 6: Add Logging**

### Use SLF4J

```java
private static final Logger logger = LoggerFactory.getLogger(StudentService.class);
```

---

# ğŸŸ© **8. Step 7: Create Service Layer**

### `StudentService.java`

```java
@Service
public class StudentService {

    private final StudentRepository repo;

    public StudentService(StudentRepository repo) {
        this.repo = repo;
    }

    public Student createStudent(StudentDTO dto) {
        Student s = new Student();
        s.setName(dto.getName());
        s.setEmail(dto.getEmail());
        s.setAge(dto.getAge());

        logger.info("Saving Student: {}", dto.getName());
        return repo.save(s);
    }

    public List<Student> getAll() {
        return repo.findAll();
    }

    public Student getOne(int id) {
        return repo.findById(id)
                .orElseThrow(() -> new StudentNotFoundException("Student Not Found with ID: " + id));
    }

    public Student update(int id, StudentDTO dto) {
        Student s = getOne(id);

        s.setName(dto.getName());
        s.setEmail(dto.getEmail());
        s.setAge(dto.getAge());

        logger.info("Updating Student ID: {}", id);
        return repo.save(s);
    }

    public void delete(int id) {
        Student s = getOne(id);
        repo.delete(s);
        logger.warn("Deleted Student ID: {}", id);
    }
}
```

---

# ğŸŸ¦ **9. Step 8: Create Controller**

### `StudentController.java`

```java
@RestController
@RequestMapping("/students")
public class StudentController {

    private final StudentService service;

    public StudentController(StudentService service) {
        this.service = service;
    }

    @PostMapping
    public ResponseEntity<Student> saveStudent(@Valid @RequestBody StudentDTO dto) {
        return ResponseEntity.status(HttpStatus.CREATED).body(service.createStudent(dto));
    }

    @GetMapping
    public List<Student> getAll() {
        return service.getAll();
    }

    @GetMapping("/{id}")
    public Student getOne(@PathVariable int id) {
        return service.getOne(id);
    }

    @PutMapping("/{id}")
    public Student update(@PathVariable int id, @Valid @RequestBody StudentDTO dto) {
        return service.update(id, dto);
    }

    @DeleteMapping("/{id}")
    public String delete(@PathVariable int id) {
        service.delete(id);
        return "Deleted successfully";
    }
}
```

---

# â­ **10. Step 9: Test All APIs in Postman**

### **POST /students**

```json
{
  "name": "Kumar",
  "email": "kumar@gmail.com",
  "age": 20
}
```

### **GET /students**

Fetch all students.

### **GET /students/1**

Fetch one student (if not found â†’ custom exception)

### **PUT /students/1**

```json
{
  "name": "Updated Kumar",
  "email": "updated@gmail.com",
  "age": 21
}
```

### **DELETE /students/1**

Deletes student.

---

# ğŸ§ª **11. Step 10: Validate Student Data**

Errors you should test:

* Empty name
* Invalid email
* Age < 18

Example Response:

```json
{
  "email": "Invalid email format",
  "age": "Age must be 18+"
}
```

---

# ğŸ“ **12. Assignments**

### **Task 1 â€“ Build an Employee Module**

With:

* DTO
* Entity
* Repository
* Service
* Controller
* Validation
* Exception Handling
* Logging

### **Task 2 â€“ Add Pagination & Sorting**

For GET all:

```
GET /students?page=0&size=5&sort=name
```

### **Task 3 â€“ Add Custom Response Format**

Return:

```json
{
  "status": "success",
  "data": {...}
}
```

---
