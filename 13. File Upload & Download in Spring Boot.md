

# ğŸŒŸ **File Upload & Download in Spring Boot**

learn how to upload files (Images, PDFs, Docs) and download them using REST APIs.

---

# ğŸŸ¦ **1. What is File Upload? (Beginner Explanation)**

File upload means sending files **from client â†’ server**.

Examples:

* Upload profile image
* Upload resume
* Upload documents

In Spring Boot, file upload is done using:

âœ” `MultipartFile`
âœ” `POST` API

---

# ğŸŸ© **2. Enable File Upload in Spring Boot**

Spring Boot supports file upload by default through **spring-boot-starter-web**.

But we can set maximum size (optional):

### application.properties

```properties
spring.servlet.multipart.max-file-size=10MB
spring.servlet.multipart.max-request-size=10MB
```

---

# ğŸŸ¥ **3. Folder to Store Files**

Choose a folder where files will be saved.

Example inside project:

```
/uploads
```

We will create this folder if not present.

---

# ğŸŸ§ **4. File Upload API (Very Beginner-Friendly Code)**

### â¤ Controller Code

```java
@RestController
@RequestMapping("/files")
public class FileController {

    private final String UPLOAD_FOLDER = "uploads/";

    @PostMapping("/upload")
    public String uploadFile(@RequestParam("file") MultipartFile file) throws Exception {

        File folder = new File(UPLOAD_FOLDER);
        if (!folder.exists()) {
            folder.mkdirs();
        }

        String filePath = UPLOAD_FOLDER + file.getOriginalFilename();
        file.transferTo(new File(filePath));

        return "File uploaded successfully: " + file.getOriginalFilename();
    }
}
```

---

# ğŸŸ¨ **5. Testing Upload in Postman**

1. Open Postman
2. Choose **POST**
3. URL:

```
http://localhost:8080/files/upload
```

4. Go to **Body â†’ Form-data**
5. Add Key: `file`
6. Type: **File**
7. Select any file
8. Send

You will get:

```
File uploaded successfully: abc.png
```

The file will be saved in the **uploads** folder.

---

# ğŸŸ« **6. File Download API (Beginner-Friendly)**

### â¤ Controller Code

```java
@GetMapping("/download/{filename}")
public ResponseEntity<Resource> downloadFile(@PathVariable String filename) throws Exception {

    Path path = Paths.get("uploads/" + filename);
    Resource resource = new UrlResource(path.toUri());

    HttpHeaders headers = new HttpHeaders();
    headers.add(HttpHeaders.CONTENT_DISPOSITION, "attachment; filename=" + filename);

    return ResponseEntity.ok()
            .headers(headers)
            .contentLength(Files.size(path))
            .contentType(MediaType.APPLICATION_OCTET_STREAM)
            .body(resource);
}
```

---

# ğŸŸ¦ **7. Testing Download in Browser/Postman**

URL example:

```
http://localhost:8080/files/download/photo.jpg
```

Browser will automatically download the file.

---

# ğŸŸ© **8. File Upload with Metadata (Beginner Example)**

Sometimes we upload file + details:

### JSON + File together (Multipart)

```java
@PostMapping("/upload/details")
public String uploadWithDetails(
        @RequestParam("file") MultipartFile file,
        @RequestParam("name") String name,
        @RequestParam("description") String desc) throws Exception {

    file.transferTo(new File("uploads/" + file.getOriginalFilename()));

    return "Uploaded " + name + " with file: " + file.getOriginalFilename();
}
```

---

# ğŸŸ§ **9. File Validation (Optional but Easy)**

### 1ï¸âƒ£ Check Empty File

```java
if (file.isEmpty()) {
    return "File cannot be empty!";
}
```

### 2ï¸âƒ£ Check File Type

```java
if (!file.getContentType().equals("image/png")) {
    return "Only PNG images allowed!";
}
```

### 3ï¸âƒ£ Check File Size

```java
if (file.getSize() > 2_000_000) {
    return "File too large! (Max 2MB)";
}
```

---

# â­ **10. Mini Project**

Build:

### â¤ FileEntity (save file details in DB)

* id
* fileName
* filePath
* fileType
* size

### â¤ FileService

* upload()
* download()

### â¤ FileController

* /upload
* /download/{name}

Students must upload files and also store metadata in MySQL.

---

# ğŸ“ **11. Day 12 Assignments**

### **Task 1 â€“ Allow only images**

Accept:

* png
* jpg
* jpeg

Return error for others.

---

### **Task 2 â€“ Maximum 5MB limit**

Reject larger files.

---

### **Task 3 â€“ Return File URL after upload**

Example:

```
http://localhost:8080/files/download/photo.png
```

